Функция ПриУстановкеФлага(вид)
    
	Если вид = "М" Тогда
		Возврат ?(ТекущийЭлемент().АссортиментМороженое=0, 1, 2);
	Иначе
		Возврат ?(ТекущийЭлемент().АссортиментПФ=0,1,2);
	КонецЕсли;

КонецФункции
//*************************************
Процедура ПриНачалеРедактированияСтроки() 
	
	ТекТов = ТекущийЭлемент();
	Если Форма.ТекущаяКолонка() = "АссМ" Тогда
		спрН = СоздатьОбъект("Справочник.Номенклатура");
		спрН.НайтиЭлемент(ТекТов);
		спрН.АссортиментМороженое = 1-спрН.АссортиментМороженое;
		Попытка
			спрН.Записать();
		Исключение
			Сообщить(ОписаниеОшибки());			
			
		КонецПопытки;
	
	ИначеЕсли Форма.ТекущаяКолонка() = "АссПФ" Тогда
		спрН = СоздатьОбъект("Справочник.Номенклатура");
		спрН.НайтиЭлемент(ТекТов);
		спрН.АссортиментПФ = 1-спрН.АссортиментПФ;
		Попытка
			спрН.Записать();
		Исключение
			Сообщить(ОписаниеОшибки());			
			
		КонецПопытки;
	
	КонецЕсли;     
	
КонецПроцедуры  
//*************************************